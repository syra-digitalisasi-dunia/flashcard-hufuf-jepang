<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Bahasa Jepang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Menggunakan font Inter untuk UI dan Noto Sans JP untuk karakter Jepang */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent; /* Menghilangkan highlight biru saat disentuh di mobile */
            overscroll-behavior-y: contain; /* Mencegah scroll 'mental' di luar batas body */
        }
        html, body {
            height: 100%;
            overflow: hidden; /* Mencegah scroll di level body, penting untuk iframe */
        }
        .japanese-char {
            font-family: 'Noto Sans JP', sans-serif;
        }
        /* Style untuk efek flip 3D pada kartu */
        .card {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.is-flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        /* Kontainer aplikasi agar pas di layar tanpa scroll */
        #app-container {
            height: 100vh; /* Tinggi penuh viewport */
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Kontainer Utama Aplikasi -->
    <div id="app-container" class="w-full max-w-lg mx-auto">
        <div id="app" class="p-4 flex-grow flex flex-col h-full">
            
            <header class="text-center mb-4 flex-shrink-0">
                <h1 class="text-3xl font-bold text-blue-600">Flashcard Jepang</h1>
                <p id="header-subtitle" class="text-gray-500">Pilih mode untuk memulai</p>
            </header>

            <!-- Layar Menu Utama -->
            <main id="menu-screen" class="flex-grow flex flex-col justify-center">
                <div class="grid grid-cols-1 gap-4">
                    <button data-deck="hiragana" class="deck-btn bg-gradient-to-br from-blue-500 to-blue-600 text-white font-bold py-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                        <span class="text-2xl">Hiragana (ひらがな)</span>
                    </button>
                    <button data-deck="katakana" class="deck-btn bg-gradient-to-br from-green-500 to-green-600 text-white font-bold py-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                        <span class="text-2xl">Katakana (カタカナ)</span>
                    </button>
                    <button data-deck="kanji" class="deck-btn bg-gradient-to-br from-red-500 to-red-600 text-white font-bold py-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                        <span class="text-2xl">Kanji (漢字) - N5</span>
                    </button>
                </div>
            </main>

            <!-- Layar Flashcard -->
            <main id="flashcard-screen" class="hidden flex-grow flex flex-col">
                <!-- Tombol Kembali dan Judul -->
                <div class="flex items-center justify-between mb-2 flex-shrink-0">
                    <button id="back-to-menu" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h2 id="deck-title" class="text-xl font-bold text-center"></h2>
                    <div class="w-8"></div> <!-- Spacer -->
                </div>

                <!-- Progress Bar -->
                <div class="mb-4 flex-shrink-0">
                    <div id="progress-text" class="text-sm text-center text-gray-600 mb-1">Progres: 0/0</div>
                    <div class="w-full bg-gray-300 rounded-full h-2.5">
                        <div id="progress-bar" class="bg-green-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Area Kartu -->
                <div class="flex-grow flex items-center justify-center">
                    <div id="card" class="card w-full h-64 sm:h-72 cursor-pointer">
                        <div class="card-inner">
                            <!-- Sisi Depan Kartu -->
                            <div class="card-face bg-white rounded-xl shadow-md border border-gray-200">
                                <p id="card-front-content" class="japanese-char text-8xl font-bold text-center"></p>
                            </div>
                            <!-- Sisi Belakang Kartu -->
                            <div class="card-face card-back bg-white rounded-xl shadow-md border border-gray-200 text-center">
                                <p id="card-back-reading" class="text-5xl font-bold text-blue-600"></p>
                                <p id="card-back-meaning" class="text-xl text-gray-700 mt-2"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tombol Navigasi -->
                <div id="navigation-buttons" class="mt-4 grid grid-cols-1 gap-4 flex-shrink-0">
                    <button id="next-card-btn" class="bg-blue-500 text-white font-semibold py-4 rounded-lg shadow-md hover:bg-blue-600 transition-colors duration-300">
                        Berikutnya
                    </button>
                    <a href="index.html" class="bg-gray-500 text-white font-semibold py-4 rounded-lg shadow-md hover:bg-gray-600 transition-colors duration-300 text-center">
                        Kembali ke Menu Utama
                    </a>
                </div>

                <!-- Pesan Selesai -->
                <div id="completion-message" class="hidden text-center p-6 bg-green-100 border border-green-400 text-green-800 rounded-lg flex-shrink-0">
                    <h3 class="text-2xl font-bold">Luar Biasa!</h3>
                    <p>Anda telah menyelesaikan set ini.</p>
                    <button id="restart-deck" class="mt-4 bg-green-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-600 transition-colors">
                        Ulangi Lagi
                    </button>
                </div>
            </main>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATABASE KARAKTER ---
            const flashcardData = {
                hiragana: [
                    { char: 'あ', reading: 'a' }, { char: 'い', reading: 'i' }, { char: 'う', reading: 'u' }, { char: 'え', reading: 'e' }, { char: 'お', reading: 'o' },
                    { char: 'か', reading: 'ka' }, { char: 'き', reading: 'ki' }, { char: 'く', reading: 'ku' }, { char: 'け', reading: 'ke' }, { char: 'こ', reading: 'ko' },
                    { char: 'さ', reading: 'sa' }, { char: 'し', reading: 'shi' }, { char: 'す', reading: 'su' }, { char: 'せ', reading: 'se' }, { char: 'そ', reading: 'so' },
                    { char: 'た', reading: 'ta' }, { char: 'ち', reading: 'chi' }, { char: 'つ', reading: 'tsu' }, { char: 'て', reading: 'te' }, { char: 'と', reading: 'to' },
                    { char: 'な', reading: 'na' }, { char: 'に', reading: 'ni' }, { char: 'ぬ', reading: 'nu' }, { char: 'ね', reading: 'ne' }, { char: 'の', reading: 'no' },
                    { char: 'は', reading: 'ha' }, { char: 'ひ', reading: 'hi' }, { char: 'ふ', reading: 'fu' }, { char: 'へ', reading: 'he' }, { char: 'ほ', reading: 'ho' },
                    { char: 'ま', reading: 'ma' }, { char: 'み', reading: 'mi' }, { char: 'む', reading: 'mu' }, { char: 'め', reading: 'me' }, { char: 'も', reading: 'mo' },
                    { char: 'や', reading: 'ya' }, { char: 'ゆ', reading: 'yu' }, { char: 'よ', reading: 'yo' },
                    { char: 'ら', reading: 'ra' }, { char: 'り', reading: 'ri' }, { char: 'る', reading: 'ru' }, { char: 'れ', reading: 're' }, { char: 'ろ', reading: 'ro' },
                    { char: 'わ', reading: 'wa' }, { char: 'を', reading: 'wo' }, { char: 'ん', reading: 'n' },
                ],
                katakana: [
                    { char: 'ア', reading: 'a' }, { char: 'イ', reading: 'i' }, { char: 'ウ', reading: 'u' }, { char: 'エ', reading: 'e' }, { char: 'オ', reading: 'o' },
                    { char: 'カ', reading: 'ka' }, { char: 'キ', reading: 'ki' }, { char: 'ク', reading: 'ku' }, { char: 'ケ', reading: 'ke' }, { char: 'コ', reading: 'ko' },
                    { char: 'サ', reading: 'sa' }, { char: 'シ', reading: 'shi' }, { char: 'ス', reading: 'su' }, { char: 'セ', reading: 'se' }, { char: 'ソ', reading: 'so' },
                    { char: 'タ', reading: 'ta' }, { char: 'チ', reading: 'chi' }, { char: 'ツ', reading: 'tsu' }, { char: 'テ', reading: 'te' }, { char: 'ト', reading: 'to' },
                    { char: 'ナ', reading: 'na' }, { char: 'ニ', reading: 'ni' }, { char: 'ヌ', reading: 'nu' }, { char: 'ネ', reading: 'ne' }, { char: 'ノ', reading: 'no' },
                    { char: 'ハ', reading: 'ha' }, { char: 'ヒ', reading: 'hi' }, { char: 'フ', reading: 'fu' }, { char: 'ヘ', reading: 'he' }, { char: 'ホ', reading: 'ho' },
                    { char: 'マ', reading: 'ma' }, { char: 'ミ', reading: 'mi' }, { char: 'ム', reading: 'mu' }, { char: 'メ', reading: 'me' }, { char: 'モ', reading: 'mo' },
                    { char: 'ヤ', reading: 'ya' }, { char: 'ユ', reading: 'yu' }, { char: 'ヨ', reading: 'yo' },
                    { char: 'ラ', reading: 'ra' }, { char: 'リ', reading: 'ri' }, { char: 'ル', reading: 'ru' }, { char: 'レ', reading: 're' }, { char: 'ロ', reading: 'ro' },
                    { char: 'ワ', reading: 'wa' }, { char: 'ヲ', reading: 'wo' }, { char: 'ン', reading: 'n' },
                ],
                kanji: [
                    { char: '一', reading: 'ichi', meaning: 'satu' },
                    { char: '二', reading: 'ni', meaning: 'dua' },
                    { char: '三', reading: 'san', meaning: 'tiga' },
                    { char: '四', reading: 'shi/yon', meaning: 'empat' },
                    { char: '五', reading: 'go', meaning: 'lima' },
                    { char: '六', reading: 'roku', meaning: 'enam' },
                    { char: '七', reading: 'shichi/nana', meaning: 'tujuh' },
                    { char: '八', reading: 'hachi', meaning: 'delapan' },
                    { char: '九', reading: 'kyuu/ku', meaning: 'sembilan' },
                    { char: '十', reading: 'juu', meaning: 'sepuluh' },
                    { char: '百', reading: 'hyaku', meaning: 'seratus' },
                    { char: '千', reading: 'sen', meaning: 'seribu' },
                    { char: '万', reading: 'man', meaning: 'sepuluh ribu' },
                    { char: '円', reading: 'en', meaning: 'yen' },
                    { char: '日', reading: 'nichi/hi', meaning: 'hari, matahari' },
                    { char: '月', reading: 'getsu/tsuki', meaning: 'bulan, senin' },
                    { char: '火', reading: 'ka/hi', meaning: 'api, selasa' },
                    { char: '水', reading: 'sui/mizu', meaning: 'air, rabu' },
                    { char: '木', reading: 'moku/ki', meaning: 'pohon, kamis' },
                    { char: '金', reading: 'kin/kane', meaning: 'emas, jumat' },
                    { char: '土', reading: 'do/tsuchi', meaning: 'tanah, sabtu' },
                    { char: '人', reading: 'jin/hito', meaning: 'orang' },
                    { char: '時', reading: 'ji/toki', meaning: 'waktu, jam' },
                    { char: '分', reading: 'fun/pun', meaning: 'menit, bagian' },
                    { char: '学', reading: 'gaku', meaning: 'belajar' },
                    { char: '生', reading: 'sei', meaning: 'hidup' },
                    { char: '先', reading: 'sen/saki', meaning: 'sebelumnya' },
                ]
            };

            // --- ELEMEN DOM ---
            const menuScreen = document.getElementById('menu-screen');
            const flashcardScreen = document.getElementById('flashcard-screen');
            const deckButtons = document.querySelectorAll('.deck-btn');
            const backToMenuBtn = document.getElementById('back-to-menu');
            const deckTitle = document.getElementById('deck-title');
            const card = document.getElementById('card');
            const cardFrontContent = document.getElementById('card-front-content');
            const cardBackReading = document.getElementById('card-back-reading');
            const cardBackMeaning = document.getElementById('card-back-meaning');
            const nextCardBtn = document.getElementById('next-card-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const completionMessage = document.getElementById('completion-message');
            const navigationButtons = document.getElementById('navigation-buttons');
            const restartDeckBtn = document.getElementById('restart-deck');
            const headerSubtitle = document.getElementById('header-subtitle');

            // --- STATE APLIKASI ---
            let currentDeck = [];
            let currentDeckType = '';
            let currentIndex = 0;

            // --- FUNGSI ---

            // Fungsi untuk mengacak urutan array (algoritma Fisher-Yates)
            const shuffleArray = (array) => {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            };

            // Fungsi untuk menampilkan kartu
            const showCard = (index) => {
                card.classList.remove('is-flipped'); // Pastikan kartu kembali ke sisi depan
                
                const item = currentDeck[index];
                cardFrontContent.textContent = item.char;
                cardBackReading.textContent = item.reading;
                
                // Tampilkan arti hanya jika ada (untuk Kanji)
                if (item.meaning) {
                    cardBackMeaning.textContent = item.meaning;
                    cardBackMeaning.classList.remove('hidden');
                } else {
                    cardBackMeaning.textContent = '';
                    cardBackMeaning.classList.add('hidden');
                }
            };

            // Fungsi untuk update progress bar
            const updateProgress = () => {
                const total = currentDeck.length;
                const current = currentIndex + 1;
                const percentage = (current / total) * 100;
                
                progressBar.style.width = `${percentage}%`;
                progressText.textContent = `Progres: ${current}/${total}`;
            };

            // Fungsi untuk memulai sesi flashcard
            const startDeck = (deckType) => {
                currentDeckType = deckType;
                currentDeck = [...flashcardData[deckType]]; // Salin array agar data asli tidak berubah
                shuffleArray(currentDeck);
                currentIndex = 0;

                // Update UI
                menuScreen.classList.add('hidden');
                flashcardScreen.classList.remove('hidden');
                flashcardScreen.classList.add('flex');
                completionMessage.classList.add('hidden');
                navigationButtons.classList.remove('hidden');
                headerSubtitle.classList.add('hidden');

                const titleMap = {
                    hiragana: 'Hiragana (ひらがな)',
                    katakana: 'Katakana (カタカナ)',
                    kanji: 'Kanji (漢字) - N5'
                };
                deckTitle.textContent = titleMap[deckType];

                showCard(currentIndex);
                updateProgress();
            };

            // --- EVENT LISTENERS ---

            // Tombol-tombol di menu utama
            deckButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const deckType = button.getAttribute('data-deck');
                    startDeck(deckType);
                });
            });

            // Tombol kembali ke menu
            backToMenuBtn.addEventListener('click', () => {
                flashcardScreen.classList.add('hidden');
                flashcardScreen.classList.remove('flex');
                menuScreen.classList.remove('hidden');
                headerSubtitle.classList.remove('hidden');
            });

            // Klik pada kartu untuk membaliknya
            card.addEventListener('click', () => {
                card.classList.toggle('is-flipped');
            });

            // Tombol 'Berikutnya'
            nextCardBtn.addEventListener('click', () => {
                currentIndex++;
                if (currentIndex < currentDeck.length) {
                    showCard(currentIndex);
                    updateProgress();
                } else {
                    // Sesi selesai
                    navigationButtons.classList.add('hidden');
                    completionMessage.classList.remove('hidden');
                }
            });

            // Tombol 'Ulangi Lagi'
            restartDeckBtn.addEventListener('click', () => {
                startDeck(currentDeckType);
            });
        });
    </script>
</body>
</html>
